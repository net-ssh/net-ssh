<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Net::SSH::Service::Forward</title>

  <link rel="stylesheet" href="../../../rdoc.css" type="text/css" media="screen" />

  <script src="../../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../../index.html">Home</a>
          <a href="../../../index.html#classes">Classes</a>
          <a href="../../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../../lib/net/ssh/service/forward_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/service/forward.rb">lib/net/ssh/service/forward.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-active_locals">#active_locals</a></li>
          
          <li><a href="#method-i-active_remotes">#active_remotes</a></li>
          
          <li><a href="#method-i-agent">#agent</a></li>
          
          <li><a href="#method-i-cancel_local">#cancel_local</a></li>
          
          <li><a href="#method-i-cancel_remote">#cancel_remote</a></li>
          
          <li><a href="#method-i-local">#local</a></li>
          
          <li><a href="#method-i-remote">#remote</a></li>
          
          <li><a href="#method-i-remote_to">#remote_to</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="../Loggable.html">Net::SSH::Loggable</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../../CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
        
          <li class="file"><a href="../../../LICENSE_rdoc.html">LICENSE.rdoc</a></li>
        
          <li class="file"><a href="../../../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../../../THANKS_rdoc.html">THANKS.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../../Net.html">Net</a></li>
        
          <li><a href="../../../Net/SSH.html">Net::SSH</a></li>
        
          <li><a href="../../../Net/SSH/Authentication.html">Net::SSH::Authentication</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent.html">Net::SSH::Authentication::Agent</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent/Comment.html">Net::SSH::Authentication::Agent::Comment</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent/Key.html">Net::SSH::Authentication::Agent::Key</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/AgentError.html">Net::SSH::Authentication::AgentError</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/AgentNotAvailable.html">Net::SSH::Authentication::AgentNotAvailable</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Constants.html">Net::SSH::Authentication::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/DisallowedMethod.html">Net::SSH::Authentication::DisallowedMethod</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/KeyManager.html">Net::SSH::Authentication::KeyManager</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/KeyManagerError.html">Net::SSH::Authentication::KeyManagerError</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods.html">Net::SSH::Authentication::Methods</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Abstract.html">Net::SSH::Authentication::Methods::Abstract</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Hostbased.html">Net::SSH::Authentication::Methods::Hostbased</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/KeyboardInteractive.html">Net::SSH::Authentication::Methods::KeyboardInteractive</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Password.html">Net::SSH::Authentication::Methods::Password</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Publickey.html">Net::SSH::Authentication::Methods::Publickey</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Session.html">Net::SSH::Authentication::Session</a></li>
        
          <li><a href="../../../Net/SSH/AuthenticationFailed.html">Net::SSH::AuthenticationFailed</a></li>
        
          <li><a href="../../../Net/SSH/Buffer.html">Net::SSH::Buffer</a></li>
        
          <li><a href="../../../Net/SSH/BufferedIo.html">Net::SSH::BufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/ChannelOpenFailed.html">Net::SSH::ChannelOpenFailed</a></li>
        
          <li><a href="../../../Net/SSH/ChannelRequestFailed.html">Net::SSH::ChannelRequestFailed</a></li>
        
          <li><a href="../../../Net/SSH/Compat.html">Net::SSH::Compat</a></li>
        
          <li><a href="../../../Net/SSH/Config.html">Net::SSH::Config</a></li>
        
          <li><a href="../../../Net/SSH/Connection.html">Net::SSH::Connection</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Channel.html">Net::SSH::Connection::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Constants.html">Net::SSH::Connection::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Session.html">Net::SSH::Connection::Session</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Session/NilChannel.html">Net::SSH::Connection::Session::NilChannel</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Term.html">Net::SSH::Connection::Term</a></li>
        
          <li><a href="../../../Net/SSH/ConnectionTimeout.html">Net::SSH::ConnectionTimeout</a></li>
        
          <li><a href="../../../Net/SSH/Disconnect.html">Net::SSH::Disconnect</a></li>
        
          <li><a href="../../../Net/SSH/Exception.html">Net::SSH::Exception</a></li>
        
          <li><a href="../../../Net/SSH/ForwardedBufferedIo.html">Net::SSH::ForwardedBufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyError.html">Net::SSH::HostKeyError</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyMismatch.html">Net::SSH::HostKeyMismatch</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyUnknown.html">Net::SSH::HostKeyUnknown</a></li>
        
          <li><a href="../../../Net/SSH/KeyFactory.html">Net::SSH::KeyFactory</a></li>
        
          <li><a href="../../../Net/SSH/KnownHosts.html">Net::SSH::KnownHosts</a></li>
        
          <li><a href="../../../Net/SSH/Loggable.html">Net::SSH::Loggable</a></li>
        
          <li><a href="../../../Net/SSH/Packet.html">Net::SSH::Packet</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods.html">Net::SSH::PromptMethods</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Clear.html">Net::SSH::PromptMethods::Clear</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Highline.html">Net::SSH::PromptMethods::Highline</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Termios.html">Net::SSH::PromptMethods::Termios</a></li>
        
          <li><a href="../../../Net/SSH/Proxy.html">Net::SSH::Proxy</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/Command.html">Net::SSH::Proxy::Command</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/ConnectError.html">Net::SSH::Proxy::ConnectError</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/Error.html">Net::SSH::Proxy::Error</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/HTTP.html">Net::SSH::Proxy::HTTP</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/SOCKS4.html">Net::SSH::Proxy::SOCKS4</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/SOCKS5.html">Net::SSH::Proxy::SOCKS5</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/UnauthorizedError.html">Net::SSH::Proxy::UnauthorizedError</a></li>
        
          <li><a href="../../../Net/SSH/Service.html">Net::SSH::Service</a></li>
        
          <li><a href="../../../Net/SSH/Service/Forward.html">Net::SSH::Service::Forward</a></li>
        
          <li><a href="../../../Net/SSH/Test.html">Net::SSH::Test</a></li>
        
          <li><a href="../../../Net/SSH/Test/Channel.html">Net::SSH::Test::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions.html">Net::SSH::Test::Extensions</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/BufferedIo.html">Net::SSH::Test::Extensions::BufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/Channel.html">Net::SSH::Test::Extensions::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/IO.html">Net::SSH::Test::Extensions::IO</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/IO/ClassMethods.html">Net::SSH::Test::Extensions::IO::ClassMethods</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/PacketStream.html">Net::SSH::Test::Extensions::PacketStream</a></li>
        
          <li><a href="../../../Net/SSH/Test/Kex.html">Net::SSH::Test::Kex</a></li>
        
          <li><a href="../../../Net/SSH/Test/LocalPacket.html">Net::SSH::Test::LocalPacket</a></li>
        
          <li><a href="../../../Net/SSH/Test/Packet.html">Net::SSH::Test::Packet</a></li>
        
          <li><a href="../../../Net/SSH/Test/RemotePacket.html">Net::SSH::Test::RemotePacket</a></li>
        
          <li><a href="../../../Net/SSH/Test/Script.html">Net::SSH::Test::Script</a></li>
        
          <li><a href="../../../Net/SSH/Test/Socket.html">Net::SSH::Test::Socket</a></li>
        
          <li><a href="../../../Net/SSH/Transport.html">Net::SSH::Transport</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Algorithms.html">Net::SSH::Transport::Algorithms</a></li>
        
          <li><a href="../../../Net/SSH/Transport/CTR.html">Net::SSH::Transport::CTR</a></li>
        
          <li><a href="../../../Net/SSH/Transport/CipherFactory.html">Net::SSH::Transport::CipherFactory</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Constants.html">Net::SSH::Transport::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC.html">Net::SSH::Transport::HMAC</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/Abstract.html">Net::SSH::Transport::HMAC::Abstract</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/MD5.html">Net::SSH::Transport::HMAC::MD5</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/MD5_96.html">Net::SSH::Transport::HMAC::MD5_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/None.html">Net::SSH::Transport::HMAC::None</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/RIPEMD160.html">Net::SSH::Transport::HMAC::RIPEMD160</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA1.html">Net::SSH::Transport::HMAC::SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA1_96.html">Net::SSH::Transport::HMAC::SHA1_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_256.html">Net::SSH::Transport::HMAC::SHA2_256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_256_96.html">Net::SSH::Transport::HMAC::SHA2_256_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_512.html">Net::SSH::Transport::HMAC::SHA2_512</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_512_96.html">Net::SSH::Transport::HMAC::SHA2_512_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/IdentityCipher.html">Net::SSH::Transport::IdentityCipher</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex.html">Net::SSH::Transport::Kex</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroup14SHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroup14SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroup1SHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroup1SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroupExchangeSHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroupExchangeSHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroupExchangeSHA256.html">Net::SSH::Transport::Kex::DiffieHellmanGroupExchangeSHA256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP256.html">Net::SSH::Transport::Kex::EcdhSHA2NistP256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP384.html">Net::SSH::Transport::Kex::EcdhSHA2NistP384</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP521.html">Net::SSH::Transport::Kex::EcdhSHA2NistP521</a></li>
        
          <li><a href="../../../Net/SSH/Transport/KeyExpander.html">Net::SSH::Transport::KeyExpander</a></li>
        
          <li><a href="../../../Net/SSH/Transport/PacketStream.html">Net::SSH::Transport::PacketStream</a></li>
        
          <li><a href="../../../Net/SSH/Transport/ServerVersion.html">Net::SSH::Transport::ServerVersion</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Session.html">Net::SSH::Transport::Session</a></li>
        
          <li><a href="../../../Net/SSH/Transport/State.html">Net::SSH::Transport::State</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers.html">Net::SSH::Verifiers</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Lenient.html">Net::SSH::Verifiers::Lenient</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Null.html">Net::SSH::Verifiers::Null</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Secure.html">Net::SSH::Verifiers::Secure</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Strict.html">Net::SSH::Verifiers::Strict</a></li>
        
          <li><a href="../../../Net/SSH/Version.html">Net::SSH::Version</a></li>
        
          <li><a href="../../../OpenSSL.html">OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/BN.html">OpenSSL::BN</a></li>
        
          <li><a href="../../../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/DH.html">OpenSSL::PKey::DH</a></li>
        
          <li><a href="../../../OpenSSL/PKey/DSA.html">OpenSSL::PKey::DSA</a></li>
        
          <li><a href="../../../OpenSSL/PKey/EC.html">OpenSSL::PKey::EC</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL.html">OpenSSL::PKey::OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey.html">OpenSSL::PKey::OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL/PKey.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL/PKey/ECError.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL::PKey::ECError</a></li>
        
          <li><a href="../../../OpenSSL/PKey/PKey.html">OpenSSL::PKey::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          <li><a href="../../../String.html">String</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Net::SSH::Service::Forward</h1>

    <div id="description" class="description">
      
<p>This class implements various port forwarding services for use by <a
href="../../SSH.html">Net::SSH</a> clients. The <a
href="Forward.html">Forward</a> class should never need to be instantiated
directly; instead, it should be accessed via the singleton instance
returned by <a
href="../Connection/Session.html#method-i-forward">Connection::Session#forward</a>:</p>

<pre>ssh.forward.local(1234, &quot;www.capify.org&quot;, 80)</pre>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="session-attribute-method" class="method-detail">
          <a name="session"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">session</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The underlying connection service instance that the port-forwarding
services employ.</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(session)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Instantiates a <a href="Forward.html#method-c-new">new</a> <a
href="Forward.html">Forward</a> service instance atop the given connection
service <a href="Forward.html#attribute-i-session">session</a>. This will
register <a href="Forward.html#method-c-new">new</a> channel open handlers
to handle the specialized channels that the <a
href="../../SSH.html">SSH</a> port forwarding protocols employ.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>)
  <span class="ruby-ivar">@session</span> = <span class="ruby-identifier">session</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>
  <span class="ruby-ivar">@remote_forwarded_ports</span> = {}
  <span class="ruby-ivar">@local_forwarded_ports</span> = {}
  <span class="ruby-ivar">@agent_forwarded</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">on_open_channel</span>(<span class="ruby-string">'forwarded-tcpip'</span>, &amp;<span class="ruby-identifier">method</span>(<span class="ruby-value">:forwarded_tcpip</span>))
  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">on_open_channel</span>(<span class="ruby-string">'auth-agent'</span>, &amp;<span class="ruby-identifier">method</span>(<span class="ruby-value">:auth_agent_channel</span>))
  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">on_open_channel</span>(<span class="ruby-string">'auth-agent@openssh.com'</span>, &amp;<span class="ruby-identifier">method</span>(<span class="ruby-value">:auth_agent_channel</span>))
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="active_locals-method" class="method-detail ">
          <a name="method-i-active_locals"></a>

          
          <div class="method-heading">
            <span class="method-name">active_locals</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a list of all active locally forwarded ports. The returned value is
an array of arrays, where each element is a two-element tuple consisting of
the <a href="Forward.html#method-i-local">local</a> port and bind address
corresponding to the forwarding port.</p>
            

            
            <div class="method-source-code" id="active_locals-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_locals</span>
  <span class="ruby-ivar">@local_forwarded_ports</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- active_locals-source -->
            
          </div>

          

          
        </div><!-- active_locals-method -->

      
        <div id="active_remotes-method" class="method-detail ">
          <a name="method-i-active_remotes"></a>

          
          <div class="method-heading">
            <span class="method-name">active_remotes</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns all active forwarded <a
href="Forward.html#method-i-remote">remote</a> ports. The returned value is
an array of two-element tuples, where the first element is the port on the
<a href="Forward.html#method-i-remote">remote</a> host and the second is
the bind address.</p>
            

            
            <div class="method-source-code" id="active_remotes-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 168</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_remotes</span>
  <span class="ruby-ivar">@remote_forwarded_ports</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- active_remotes-source -->
            
          </div>

          

          
        </div><!-- active_remotes-method -->

      
        <div id="agent-method" class="method-detail ">
          <a name="method-i-agent"></a>

          
          <div class="method-heading">
            <span class="method-name">agent</span><span
              class="method-args">(channel)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Enables <a href="../../SSH.html">SSH</a> <a
href="Forward.html#method-i-agent">agent</a> forwarding on the given
channel. The forwarded <a href="Forward.html#method-i-agent">agent</a> will
remain active even after the channel closes–the channel is only used as the
transport for enabling the forwarded connection. You should never need to
call this directly–it is called automatically the first time a <a
href="Forward.html#attribute-i-session">session</a> channel is opened, when
the connection was created with :forward_agent set to true:</p>

<pre>Net::SSH.start(&quot;remote.host&quot;, &quot;me&quot;, :forwrd_agent =&gt; true) do |ssh|
  ssh.open_channel do |ch|
    # agent will be automatically forwarded by this point
  end
  ssh.loop
end</pre>
            

            
            <div class="method-source-code" id="agent-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">agent</span>(<span class="ruby-identifier">channel</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@agent_forwarded</span>
  <span class="ruby-ivar">@agent_forwarded</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">send_channel_request</span>(<span class="ruby-string">&quot;auth-agent-req@openssh.com&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">achannel</span>, <span class="ruby-identifier">success</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">success</span>
      <span class="ruby-identifier">debug</span> { <span class="ruby-string">&quot;authentication agent forwarding is active&quot;</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">achannel</span>.<span class="ruby-identifier">send_channel_request</span>(<span class="ruby-string">&quot;auth-agent-req&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a2channel</span>, <span class="ruby-identifier">success2</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">success2</span>
          <span class="ruby-identifier">debug</span> { <span class="ruby-string">&quot;authentication agent forwarding is active&quot;</span> }
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">error</span> { <span class="ruby-string">&quot;could not establish forwarding of authentication agent&quot;</span> }
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- agent-source -->
            
          </div>

          

          
        </div><!-- agent-method -->

      
        <div id="cancel_local-method" class="method-detail ">
          <a name="method-i-cancel_local"></a>

          
          <div class="method-heading">
            <span class="method-name">cancel_local</span><span
              class="method-args">(port, bind_address="127.0.0.1")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Terminates an active <a href="Forward.html#method-i-local">local</a>
forwarded port. If no such forwarded port exists, this will raise an
exception. Otherwise, the forwarded connection is terminated.</p>

<pre>ssh.forward.cancel_local(1234)
ssh.forward.cancel_local(1234, &quot;0.0.0.0&quot;)</pre>
            

            
            <div class="method-source-code" id="cancel_local-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cancel_local</span>(<span class="ruby-identifier">port</span>, <span class="ruby-identifier">bind_address</span>=<span class="ruby-string">&quot;127.0.0.1&quot;</span>)
  <span class="ruby-identifier">socket</span> = <span class="ruby-ivar">@local_forwarded_ports</span>.<span class="ruby-identifier">delete</span>([<span class="ruby-identifier">port</span>, <span class="ruby-identifier">bind_address</span>])
  <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">shutdown</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">stop_listening_to</span>(<span class="ruby-identifier">socket</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- cancel_local-source -->
            
          </div>

          

          
        </div><!-- cancel_local-method -->

      
        <div id="cancel_remote-method" class="method-detail ">
          <a name="method-i-cancel_remote"></a>

          
          <div class="method-heading">
            <span class="method-name">cancel_remote</span><span
              class="method-args">(port, host="127.0.0.1")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Requests that a <a href="Forward.html#method-i-remote">remote</a> forwarded
port be cancelled. The <a href="Forward.html#method-i-remote">remote</a>
forwarded port on the <a href="Forward.html#method-i-remote">remote</a>
host, bound to the given address on the <a
href="Forward.html#method-i-remote">remote</a> host, will be terminated,
but not immediately. This method returns immediately after queueing the
request to be sent to the server. If for some reason the port cannot be
cancelled, an exception will be raised (asynchronously).</p>

<p>If you want to know when the connection has been cancelled, it will no
longer be present in the #<a
href="Forward.html#method-i-active_remotes">active_remotes</a> list. If you
want to block until the port is no longer active, you could do something
like this:</p>

<pre>ssh.forward.cancel_remote(1234, &quot;0.0.0.0&quot;)
ssh.loop { ssh.forward.active_remotes.include?([1234, &quot;0.0.0.0&quot;]) }</pre>
            

            
            <div class="method-source-code" id="cancel_remote-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cancel_remote</span>(<span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span>=<span class="ruby-string">&quot;127.0.0.1&quot;</span>)
  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">send_global_request</span>(<span class="ruby-string">&quot;cancel-tcpip-forward&quot;</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">host</span>, <span class="ruby-value">:long</span>, <span class="ruby-identifier">port</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">success</span>, <span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">success</span>
      <span class="ruby-ivar">@remote_forwarded_ports</span>.<span class="ruby-identifier">delete</span>([<span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-node">&quot;could not cancel remote forward request on #{host}:#{port}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- cancel_remote-source -->
            
          </div>

          

          
        </div><!-- cancel_remote-method -->

      
        <div id="local-method" class="method-detail ">
          <a name="method-i-local"></a>

          
          <div class="method-heading">
            <span class="method-name">local</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Starts listening for connections on the <a
href="Forward.html#method-i-local">local</a> host, and forwards them to the
specified <a href="Forward.html#method-i-remote">remote</a> host/port via
the <a href="../../SSH.html">SSH</a> connection. This method accepts either
three or four arguments. When four arguments are given, they are:</p>
<ul><li>
<p>the <a href="Forward.html#method-i-local">local</a> address to bind to</p>
</li><li>
<p>the <a href="Forward.html#method-i-local">local</a> port to listen on</p>
</li><li>
<p>the <a href="Forward.html#method-i-remote">remote</a> host to forward
connections to</p>
</li><li>
<p>the port on the <a href="Forward.html#method-i-remote">remote</a> host to
connect to</p>
</li></ul>

<p>If three arguments are given, it is as if the <a
href="Forward.html#method-i-local">local</a> bind address is “127.0.0.1”,
and the rest are applied as above.</p>

<pre>ssh.forward.local(1234, &quot;www.capify.org&quot;, 80)
ssh.forward.local(&quot;0.0.0.0&quot;, 1234, &quot;www.capify.org&quot;, 80)</pre>
            

            
            <div class="method-source-code" id="local-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">local</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">3</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">4</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;expected 3 or 4 parameters, got #{args.length}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">local_port_type</span> = <span class="ruby-value">:long</span>

  <span class="ruby-identifier">socket</span> = <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">UNIXServer</span>
      <span class="ruby-identifier">local_port_type</span> = <span class="ruby-value">:string</span>
      <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">bind_address</span> = <span class="ruby-string">&quot;127.0.0.1&quot;</span>
      <span class="ruby-identifier">bind_address</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\D/</span>
      <span class="ruby-identifier">local_port</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">to_i</span>
      <span class="ruby-identifier">local_port_type</span> = <span class="ruby-value">:long</span>
      <span class="ruby-constant">TCPServer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">bind_address</span>, <span class="ruby-identifier">local_port</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">remote_host</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">remote_port</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">to_i</span>

  <span class="ruby-ivar">@local_forwarded_ports</span>[[<span class="ruby-identifier">local_port</span>, <span class="ruby-identifier">bind_address</span>]] = <span class="ruby-identifier">socket</span>

  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">listen_to</span>(<span class="ruby-identifier">socket</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">server</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">client</span> = <span class="ruby-identifier">server</span>.<span class="ruby-identifier">accept</span>
    <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;received connection on #{socket}&quot;</span> }

    <span class="ruby-identifier">channel</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">open_channel</span>(<span class="ruby-string">&quot;direct-tcpip&quot;</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">remote_host</span>, <span class="ruby-value">:long</span>, <span class="ruby-identifier">remote_port</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">bind_address</span>, <span class="ruby-identifier">local_port_type</span>, <span class="ruby-identifier">local_port</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">achannel</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">achannel</span>.<span class="ruby-identifier">info</span> { <span class="ruby-string">&quot;direct channel established&quot;</span> }
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">prepare_client</span>(<span class="ruby-identifier">client</span>, <span class="ruby-identifier">channel</span>, <span class="ruby-value">:local</span>)
  
    <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_open_failed</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>, <span class="ruby-identifier">code</span>, <span class="ruby-identifier">description</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">error</span> { <span class="ruby-node">&quot;could not establish direct channel: #{description} (#{code})&quot;</span> }
      <span class="ruby-identifier">channel</span>[<span class="ruby-value">:socket</span>].<span class="ruby-identifier">close</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- local-source -->
            
          </div>

          

          
        </div><!-- local-method -->

      
        <div id="remote-method" class="method-detail ">
          <a name="method-i-remote"></a>

          
          <div class="method-heading">
            <span class="method-name">remote</span><span
              class="method-args">(port, host, remote_port, remote_host="127.0.0.1")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Requests that all connections on the given <a
href="Forward.html#method-i-remote">remote</a>-port be forwarded via the <a
href="Forward.html#method-i-local">local</a> host to the given port/host.
The last argument describes the bind address on the <a
href="Forward.html#method-i-remote">remote</a> host, and defaults to
127.0.0.1.</p>

<p>This method will return immediately, but the port will not actually be
forwarded immediately. If the <a
href="Forward.html#method-i-remote">remote</a> server is not able to begin
the listener for this request, an exception will be raised asynchronously.</p>

<p>If you want to know when the connection is active, it will show up in the
#<a href="Forward.html#method-i-active_remotes">active_remotes</a> list. If
you want to block until the port is active, you could do something like
this:</p>

<pre>ssh.forward.remote(80, &quot;www.google.com&quot;, 1234, &quot;0.0.0.0&quot;)
ssh.loop { !ssh.forward.active_remotes.include?([1234, &quot;0.0.0.0&quot;]) }</pre>
            

            
            <div class="method-source-code" id="remote-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/service/forward.rb, line 128</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remote</span>(<span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span>, <span class="ruby-identifier">remote_port</span>, <span class="ruby-identifier">remote_host</span>=<span class="ruby-string">&quot;127.0.0.1&quot;</span>)
  <span class="ruby-identifier">session</span>.<span class="ruby-identifier">send_global_request</span>(<span class="ruby-string">&quot;tcpip-forward&quot;</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">remote_host</span>, <span class="ruby-value">:long</span>, <span class="ruby-identifier">remote_port</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">success</span>, <span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">success</span>
      <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;remote forward from remote #{remote_host}:#{remote_port} to #{host}:#{port} established&quot;</span> }
      <span class="ruby-ivar">@remote_forwarded_ports</span>[[<span class="ruby-identifier">remote_port</span>, <span class="ruby-identifier">remote_host</span>]] = <span class="ruby-constant">Remote</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">error</span> { <span class="ruby-string">&quot;remote forwarding request failed&quot;</span> }
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-string">&quot;remote forwarding request failed&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remote-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Forward.html#method-i-remote_to">remote_to</a>
          </div>
          

          
        </div><!-- remote-method -->

      
        <div id="remote_to-method" class="method-detail method-alias">
          <a name="method-i-remote_to"></a>

          
          <div class="method-heading">
            <span class="method-name">remote_to</span><span
              class="method-args">(port, host, remote_port, remote_host="127.0.0.1")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>an alias, for token backwards compatibility with the 1.x API</p>
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Forward.html#method-i-remote">remote</a>
          </div>
          
        </div><!-- remote_to-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

