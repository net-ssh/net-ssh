<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Net::SSH::Connection::Session</title>

  <link rel="stylesheet" href="../../../rdoc.css" type="text/css" media="screen" />

  <script src="../../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../../index.html">Home</a>
          <a href="../../../index.html#classes">Classes</a>
          <a href="../../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../../lib/net/ssh/connection/session_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/net/ssh/connection/session.rb">lib/net/ssh/connection/session.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="Session/NilChannel.html">Net::SSH::Connection::Session::NilChannel</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-5B-5D">#[]</a></li>
          
          <li><a href="#method-i-5B-5D-3D">#[]=</a></li>
          
          <li><a href="#method-i-busy-3F">#busy?</a></li>
          
          <li><a href="#method-i-close">#close</a></li>
          
          <li><a href="#method-i-closed-3F">#closed?</a></li>
          
          <li><a href="#method-i-exec">#exec</a></li>
          
          <li><a href="#method-i-exec-21">#exec!</a></li>
          
          <li><a href="#method-i-forward">#forward</a></li>
          
          <li><a href="#method-i-host">#host</a></li>
          
          <li><a href="#method-i-listen_to">#listen_to</a></li>
          
          <li><a href="#method-i-loop">#loop</a></li>
          
          <li><a href="#method-i-loop_forever">#loop_forever</a></li>
          
          <li><a href="#method-i-on_global_request">#on_global_request</a></li>
          
          <li><a href="#method-i-on_open_channel">#on_open_channel</a></li>
          
          <li><a href="#method-i-open_channel">#open_channel</a></li>
          
          <li><a href="#method-i-postprocess">#postprocess</a></li>
          
          <li><a href="#method-i-preprocess">#preprocess</a></li>
          
          <li><a href="#method-i-process">#process</a></li>
          
          <li><a href="#method-i-send_global_request">#send_global_request</a></li>
          
          <li><a href="#method-i-send_message">#send_message</a></li>
          
          <li><a href="#method-i-shutdown-21">#shutdown!</a></li>
          
          <li><a href="#method-i-stop_listening_to">#stop_listening_to</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="Constants.html">Net::SSH::Connection::Constants</a></li>
        
        
        
          <li><a class="include" href="../Loggable.html">Net::SSH::Loggable</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../../CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
        
          <li class="file"><a href="../../../LICENSE_rdoc.html">LICENSE.rdoc</a></li>
        
          <li class="file"><a href="../../../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../../../THANKS_rdoc.html">THANKS.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../../Net.html">Net</a></li>
        
          <li><a href="../../../Net/SSH.html">Net::SSH</a></li>
        
          <li><a href="../../../Net/SSH/Authentication.html">Net::SSH::Authentication</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent.html">Net::SSH::Authentication::Agent</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent/Comment.html">Net::SSH::Authentication::Agent::Comment</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Agent/Key.html">Net::SSH::Authentication::Agent::Key</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/AgentError.html">Net::SSH::Authentication::AgentError</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/AgentNotAvailable.html">Net::SSH::Authentication::AgentNotAvailable</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Constants.html">Net::SSH::Authentication::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/DisallowedMethod.html">Net::SSH::Authentication::DisallowedMethod</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/KeyManager.html">Net::SSH::Authentication::KeyManager</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/KeyManagerError.html">Net::SSH::Authentication::KeyManagerError</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods.html">Net::SSH::Authentication::Methods</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Abstract.html">Net::SSH::Authentication::Methods::Abstract</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Hostbased.html">Net::SSH::Authentication::Methods::Hostbased</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/KeyboardInteractive.html">Net::SSH::Authentication::Methods::KeyboardInteractive</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Password.html">Net::SSH::Authentication::Methods::Password</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Methods/Publickey.html">Net::SSH::Authentication::Methods::Publickey</a></li>
        
          <li><a href="../../../Net/SSH/Authentication/Session.html">Net::SSH::Authentication::Session</a></li>
        
          <li><a href="../../../Net/SSH/AuthenticationFailed.html">Net::SSH::AuthenticationFailed</a></li>
        
          <li><a href="../../../Net/SSH/Buffer.html">Net::SSH::Buffer</a></li>
        
          <li><a href="../../../Net/SSH/BufferedIo.html">Net::SSH::BufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/ChannelOpenFailed.html">Net::SSH::ChannelOpenFailed</a></li>
        
          <li><a href="../../../Net/SSH/ChannelRequestFailed.html">Net::SSH::ChannelRequestFailed</a></li>
        
          <li><a href="../../../Net/SSH/Compat.html">Net::SSH::Compat</a></li>
        
          <li><a href="../../../Net/SSH/Config.html">Net::SSH::Config</a></li>
        
          <li><a href="../../../Net/SSH/Connection.html">Net::SSH::Connection</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Channel.html">Net::SSH::Connection::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Constants.html">Net::SSH::Connection::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Session.html">Net::SSH::Connection::Session</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Session/NilChannel.html">Net::SSH::Connection::Session::NilChannel</a></li>
        
          <li><a href="../../../Net/SSH/Connection/Term.html">Net::SSH::Connection::Term</a></li>
        
          <li><a href="../../../Net/SSH/ConnectionTimeout.html">Net::SSH::ConnectionTimeout</a></li>
        
          <li><a href="../../../Net/SSH/Disconnect.html">Net::SSH::Disconnect</a></li>
        
          <li><a href="../../../Net/SSH/Exception.html">Net::SSH::Exception</a></li>
        
          <li><a href="../../../Net/SSH/ForwardedBufferedIo.html">Net::SSH::ForwardedBufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyError.html">Net::SSH::HostKeyError</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyMismatch.html">Net::SSH::HostKeyMismatch</a></li>
        
          <li><a href="../../../Net/SSH/HostKeyUnknown.html">Net::SSH::HostKeyUnknown</a></li>
        
          <li><a href="../../../Net/SSH/KeyFactory.html">Net::SSH::KeyFactory</a></li>
        
          <li><a href="../../../Net/SSH/KnownHosts.html">Net::SSH::KnownHosts</a></li>
        
          <li><a href="../../../Net/SSH/Loggable.html">Net::SSH::Loggable</a></li>
        
          <li><a href="../../../Net/SSH/Packet.html">Net::SSH::Packet</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods.html">Net::SSH::PromptMethods</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Clear.html">Net::SSH::PromptMethods::Clear</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Highline.html">Net::SSH::PromptMethods::Highline</a></li>
        
          <li><a href="../../../Net/SSH/PromptMethods/Termios.html">Net::SSH::PromptMethods::Termios</a></li>
        
          <li><a href="../../../Net/SSH/Proxy.html">Net::SSH::Proxy</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/Command.html">Net::SSH::Proxy::Command</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/ConnectError.html">Net::SSH::Proxy::ConnectError</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/Error.html">Net::SSH::Proxy::Error</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/HTTP.html">Net::SSH::Proxy::HTTP</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/SOCKS4.html">Net::SSH::Proxy::SOCKS4</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/SOCKS5.html">Net::SSH::Proxy::SOCKS5</a></li>
        
          <li><a href="../../../Net/SSH/Proxy/UnauthorizedError.html">Net::SSH::Proxy::UnauthorizedError</a></li>
        
          <li><a href="../../../Net/SSH/Service.html">Net::SSH::Service</a></li>
        
          <li><a href="../../../Net/SSH/Service/Forward.html">Net::SSH::Service::Forward</a></li>
        
          <li><a href="../../../Net/SSH/Test.html">Net::SSH::Test</a></li>
        
          <li><a href="../../../Net/SSH/Test/Channel.html">Net::SSH::Test::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions.html">Net::SSH::Test::Extensions</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/BufferedIo.html">Net::SSH::Test::Extensions::BufferedIo</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/Channel.html">Net::SSH::Test::Extensions::Channel</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/IO.html">Net::SSH::Test::Extensions::IO</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/IO/ClassMethods.html">Net::SSH::Test::Extensions::IO::ClassMethods</a></li>
        
          <li><a href="../../../Net/SSH/Test/Extensions/PacketStream.html">Net::SSH::Test::Extensions::PacketStream</a></li>
        
          <li><a href="../../../Net/SSH/Test/Kex.html">Net::SSH::Test::Kex</a></li>
        
          <li><a href="../../../Net/SSH/Test/LocalPacket.html">Net::SSH::Test::LocalPacket</a></li>
        
          <li><a href="../../../Net/SSH/Test/Packet.html">Net::SSH::Test::Packet</a></li>
        
          <li><a href="../../../Net/SSH/Test/RemotePacket.html">Net::SSH::Test::RemotePacket</a></li>
        
          <li><a href="../../../Net/SSH/Test/Script.html">Net::SSH::Test::Script</a></li>
        
          <li><a href="../../../Net/SSH/Test/Socket.html">Net::SSH::Test::Socket</a></li>
        
          <li><a href="../../../Net/SSH/Transport.html">Net::SSH::Transport</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Algorithms.html">Net::SSH::Transport::Algorithms</a></li>
        
          <li><a href="../../../Net/SSH/Transport/CTR.html">Net::SSH::Transport::CTR</a></li>
        
          <li><a href="../../../Net/SSH/Transport/CipherFactory.html">Net::SSH::Transport::CipherFactory</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Constants.html">Net::SSH::Transport::Constants</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC.html">Net::SSH::Transport::HMAC</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/Abstract.html">Net::SSH::Transport::HMAC::Abstract</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/MD5.html">Net::SSH::Transport::HMAC::MD5</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/MD5_96.html">Net::SSH::Transport::HMAC::MD5_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/None.html">Net::SSH::Transport::HMAC::None</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/RIPEMD160.html">Net::SSH::Transport::HMAC::RIPEMD160</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA1.html">Net::SSH::Transport::HMAC::SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA1_96.html">Net::SSH::Transport::HMAC::SHA1_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_256.html">Net::SSH::Transport::HMAC::SHA2_256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_256_96.html">Net::SSH::Transport::HMAC::SHA2_256_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_512.html">Net::SSH::Transport::HMAC::SHA2_512</a></li>
        
          <li><a href="../../../Net/SSH/Transport/HMAC/SHA2_512_96.html">Net::SSH::Transport::HMAC::SHA2_512_96</a></li>
        
          <li><a href="../../../Net/SSH/Transport/IdentityCipher.html">Net::SSH::Transport::IdentityCipher</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex.html">Net::SSH::Transport::Kex</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroup14SHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroup14SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroup1SHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroup1SHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroupExchangeSHA1.html">Net::SSH::Transport::Kex::DiffieHellmanGroupExchangeSHA1</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/DiffieHellmanGroupExchangeSHA256.html">Net::SSH::Transport::Kex::DiffieHellmanGroupExchangeSHA256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP256.html">Net::SSH::Transport::Kex::EcdhSHA2NistP256</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP384.html">Net::SSH::Transport::Kex::EcdhSHA2NistP384</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Kex/EcdhSHA2NistP521.html">Net::SSH::Transport::Kex::EcdhSHA2NistP521</a></li>
        
          <li><a href="../../../Net/SSH/Transport/KeyExpander.html">Net::SSH::Transport::KeyExpander</a></li>
        
          <li><a href="../../../Net/SSH/Transport/PacketStream.html">Net::SSH::Transport::PacketStream</a></li>
        
          <li><a href="../../../Net/SSH/Transport/ServerVersion.html">Net::SSH::Transport::ServerVersion</a></li>
        
          <li><a href="../../../Net/SSH/Transport/Session.html">Net::SSH::Transport::Session</a></li>
        
          <li><a href="../../../Net/SSH/Transport/State.html">Net::SSH::Transport::State</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers.html">Net::SSH::Verifiers</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Lenient.html">Net::SSH::Verifiers::Lenient</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Null.html">Net::SSH::Verifiers::Null</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Secure.html">Net::SSH::Verifiers::Secure</a></li>
        
          <li><a href="../../../Net/SSH/Verifiers/Strict.html">Net::SSH::Verifiers::Strict</a></li>
        
          <li><a href="../../../Net/SSH/Version.html">Net::SSH::Version</a></li>
        
          <li><a href="../../../OpenSSL.html">OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/BN.html">OpenSSL::BN</a></li>
        
          <li><a href="../../../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/DH.html">OpenSSL::PKey::DH</a></li>
        
          <li><a href="../../../OpenSSL/PKey/DSA.html">OpenSSL::PKey::DSA</a></li>
        
          <li><a href="../../../OpenSSL/PKey/EC.html">OpenSSL::PKey::EC</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL.html">OpenSSL::PKey::OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey.html">OpenSSL::PKey::OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL/PKey.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/OpenSSL/PKey/OpenSSL/PKey/ECError.html">OpenSSL::PKey::OpenSSL::PKey::OpenSSL::PKey::ECError</a></li>
        
          <li><a href="../../../OpenSSL/PKey/PKey.html">OpenSSL::PKey::PKey</a></li>
        
          <li><a href="../../../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          <li><a href="../../../String.html">String</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Net::SSH::Connection::Session</h1>

    <div id="description" class="description">
      
<p>A session class representing the connection service running on top of the
<a href="../../SSH.html">SSH</a> <a
href="Session.html#attribute-i-transport">transport</a> layer. It manages
the creation of channels (see #<a
href="Session.html#method-i-open_channel">open_channel</a>), and the
dispatching of messages to the various channels. It also encapsulates the
<a href="../../SSH.html">SSH</a> event <a
href="Session.html#method-i-loop">loop</a> (via #<a
href="Session.html#method-i-loop">loop</a> and #<a
href="Session.html#method-i-process">process</a>), and serves as a central
point-of-reference for all SSH-related services (e.g. port forwarding,
SFTP, SCP, etc.).</p>

<p>You will rarely (if ever) need to instantiate this class directly; rather,
you’ll almost always use <a
href="../../SSH.html#method-c-start">Net::SSH.start</a> to initialize a <a
href="Session.html#method-c-new">new</a> network connection, authenticate a
user, and return a <a href="Session.html#method-c-new">new</a> connection
session, all in one call.</p>

<pre>Net::SSH.start(&quot;localhost&quot;, &quot;user&quot;) do |ssh|
  # 'ssh' is an instance of Net::SSH::Connection::Session
  ssh.exec! &quot;/etc/init.d/some_process start&quot;
end</pre>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="MAP">MAP</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="options-attribute-method" class="method-detail">
          <a name="options"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">options</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The map of <a href="Session.html#attribute-i-options">options</a> that were
used to initialize this instance.</p>
          
          </div>
        </div>
        
        <div id="properties-attribute-method" class="method-detail">
          <a name="properties"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">properties</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The collection of custom <a
href="Session.html#attribute-i-properties">properties</a> for this
instance. (See #[] and #[]=).</p>
          
          </div>
        </div>
        
        <div id="transport-attribute-method" class="method-detail">
          <a name="transport"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">transport</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The underlying <a href="Session.html#attribute-i-transport">transport</a>
layer abstraction (see <a
href="../Transport/Session.html">Net::SSH::Transport::Session</a>).</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(transport, options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Create a <a href="Session.html#method-c-new">new</a> connection service
instance atop the given <a
href="Session.html#attribute-i-transport">transport</a> layer. Initializes
the listeners to be only the underlying socket object.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 62</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">transport</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">logger</span>

  <span class="ruby-ivar">@transport</span> = <span class="ruby-identifier">transport</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>

  <span class="ruby-ivar">@channel_id_counter</span> = <span class="ruby-value">-1</span>
  <span class="ruby-ivar">@channels</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">NilChannel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>))
  <span class="ruby-ivar">@listeners</span> = { <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">socket</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-ivar">@pending_requests</span> = []
  <span class="ruby-ivar">@channel_open_handlers</span> = {}
  <span class="ruby-ivar">@on_global_request</span> = {}
  <span class="ruby-ivar">@properties</span> = (<span class="ruby-identifier">options</span>[<span class="ruby-value">:properties</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="5B-5D-method" class="method-detail ">
          <a name="method-i-5B-5D"></a>

          
          <div class="method-heading">
            <span class="method-name">[]</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieves a custom property from this instance. This can be used to store
additional state in applications that must manage multiple <a
href="../../SSH.html">SSH</a> connections.</p>
            

            
            <div class="method-source-code" id="5B-5D-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">key</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- 5B-5D-source -->
            
          </div>

          

          
        </div><!-- 5B-5D-method -->

      
        <div id="5B-5D-3D-method" class="method-detail ">
          <a name="method-i-5B-5D-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">[]=</span><span
              class="method-args">(key, value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Sets a custom property for this instance.</p>
            

            
            <div class="method-source-code" id="5B-5D-3D-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 5B-5D-3D-source -->
            
          </div>

          

          
        </div><!-- 5B-5D-3D-method -->

      
        <div id="busy-3F-method" class="method-detail ">
          <a name="method-i-busy-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">busy?</span><span
              class="method-args">(include_invisible=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns <tt>true</tt> if there are any channels currently active on this
session. By default, this will not include “invisible” channels (such as
those created by forwarding ports and such), but if you pass a
<tt>true</tt> value for <tt>include_invisible</tt>, then those will be
counted.</p>

<p>This can be useful for determining whether the event <a
href="Session.html#method-i-loop">loop</a> should continue to be run.</p>

<pre>ssh.loop { ssh.busy? }</pre>
            

            
            <div class="method-source-code" id="busy-3F-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">busy?</span>(<span class="ruby-identifier">include_invisible</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">include_invisible</span>
    <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">ch</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ch</span>[<span class="ruby-value">:invisible</span>] }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- busy-3F-source -->
            
          </div>

          

          
        </div><!-- busy-3F-method -->

      
        <div id="close-method" class="method-detail ">
          <a name="method-i-close"></a>

          
          <div class="method-heading">
            <span class="method-name">close</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Closes the session gracefully, blocking until all channels have
successfully closed, and then closes the underlying <a
href="Session.html#attribute-i-transport">transport</a> layer connection.</p>
            

            
            <div class="method-source-code" id="close-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>
  <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;closing remaining channels (#{channels.length} open)&quot;</span> }
  <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">close</span> }
  <span class="ruby-identifier">loop</span> { <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span> }
  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">close</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- close-source -->
            
          </div>

          

          
        </div><!-- close-method -->

      
        <div id="closed-3F-method" class="method-detail ">
          <a name="method-i-closed-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">closed?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns true if the underlying <a
href="Session.html#attribute-i-transport">transport</a> has been closed.
Note that this can be a little misleading, since if the remote server has
closed the connection, the local end will still think it is open until the
next operation on the socket. Nevertheless, this method can be useful if
you just want to know if <em>you</em> have closed the connection.</p>
            

            
            <div class="method-source-code" id="closed-3F-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">closed?</span>
  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">closed?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- closed-3F-source -->
            
          </div>

          

          
        </div><!-- closed-3F-method -->

      
        <div id="exec-method" class="method-detail ">
          <a name="method-i-exec"></a>

          
          <div class="method-heading">
            <span class="method-name">exec</span><span
              class="method-args">(command, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>A convenience method for executing a command and interacting with it. If no
block is given, all output is printed via $stdout and $stderr. Otherwise,
the block is called for each data and extended data packet, with three
arguments: the channel object, a symbol indicating the data type (:stdout
or :stderr), and the data (as a string).</p>

<p>Note that this method returns immediately, and requires an event <a
href="Session.html#method-i-loop">loop</a> (see <a
href="Session.html#method-i-loop">Session#loop</a>) in order for the
command to actually execute.</p>

<p>This is effectively identical to calling #<a
href="Session.html#method-i-open_channel">open_channel</a>, and then <a
href="Channel.html#method-i-exec">Net::SSH::Connection::Channel#exec</a>,
and then setting up the channel callbacks. However, for most uses, this
will be sufficient.</p>

<pre>ssh.exec &quot;grep something /some/files&quot; do |ch, stream, data|
  if stream == :stderr
    puts &quot;ERROR: #{data}&quot;
  else
    puts data
  end
end</pre>
            

            
            <div class="method-source-code" id="exec-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 319</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">open_channel</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>, <span class="ruby-identifier">success</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;could not execute command: #{command.inspect}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">success</span>
      
      <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_data</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch2</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
          <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch2</span>, <span class="ruby-value">:stdout</span>, <span class="ruby-identifier">data</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">data</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_extended_data</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch2</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
          <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch2</span>, <span class="ruby-value">:stderr</span>, <span class="ruby-identifier">data</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">data</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- exec-source -->
            
          </div>

          

          
        </div><!-- exec-method -->

      
        <div id="exec-21-method" class="method-detail ">
          <a name="method-i-exec-21"></a>

          
          <div class="method-heading">
            <span class="method-name">exec!</span><span
              class="method-args">(command, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Same as #<a href="Session.html#method-i-exec">exec</a>, except this will
block until the command finishes. Also, if a block is not given, this will
return all output (stdout and stderr) as a single string.</p>

<pre>matches = ssh.exec!(&quot;grep something /some/files&quot;)</pre>
            

            
            <div class="method-source-code" id="exec-21-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec!</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">ch</span>[<span class="ruby-value">:result</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">ch</span>[<span class="ruby-value">:result</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">channel</span> = <span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">wait</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">channel</span>[<span class="ruby-value">:result</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- exec-21-source -->
            
          </div>

          

          
        </div><!-- exec-21-method -->

      
        <div id="forward-method" class="method-detail ">
          <a name="method-i-forward"></a>

          
          <div class="method-heading">
            <span class="method-name">forward</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a reference to the <a
href="../Service/Forward.html">Net::SSH::Service::Forward</a> service,
which can be used for forwarding ports over <a
href="../../SSH.html">SSH</a>.</p>
            

            
            <div class="method-source-code" id="forward-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">forward</span>
  <span class="ruby-ivar">@forward</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Service</span><span class="ruby-operator">::</span><span class="ruby-constant">Forward</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- forward-source -->
            
          </div>

          

          
        </div><!-- forward-method -->

      
        <div id="host-method" class="method-detail ">
          <a name="method-i-host"></a>

          
          <div class="method-heading">
            <span class="method-name">host</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the name of the <a href="Session.html#method-i-host">host</a> that
was given to the <a href="Session.html#attribute-i-transport">transport</a>
layer to connect to.</p>
            

            
            <div class="method-source-code" id="host-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">host</span>
  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">host</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- host-source -->
            
          </div>

          

          
        </div><!-- host-method -->

      
        <div id="listen_to-method" class="method-detail ">
          <a name="method-i-listen_to"></a>

          
          <div class="method-heading">
            <span class="method-name">listen_to</span><span
              class="method-args">(io, &callback)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds an IO object for the event <a
href="Session.html#method-i-loop">loop</a> to listen to. If a callback is
given, it will be invoked when the io is ready to be read, otherwise, the
io will merely have its #fill method invoked.</p>

<p>Any <tt>io</tt> value passed to this method <em>must</em> have mixed into
it the <a href="../BufferedIo.html">Net::SSH::BufferedIo</a> functionality,
typically by calling #extend on the object.</p>

<p>The following example executes a <a
href="Session.html#method-i-process">process</a> on the remote server,
opens a socket to somewhere, and then pipes data from that socket to the
remote <a href="Session.html#method-i-process">process</a>’ stdin stream:</p>

<pre>channel = ssh.open_channel do |ch|
  ch.exec &quot;/some/process/that/wants/input&quot; do |ch, success|
    abort &quot;can't execute!&quot; unless success

    io = TCPSocket.new(somewhere, port)
    io.extend(Net::SSH::BufferedIo)
    ssh.listen_to(io)

    ch.on_process do
      if io.available &gt; 0
        ch.send_data(io.read_available)
      end
    end

    ch.on_close do
      ssh.stop_listening_to(io)
      io.close
    end
  end
end

channel.wait</pre>
            

            
            <div class="method-source-code" id="listen_to-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 405</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">listen_to</span>(<span class="ruby-identifier">io</span>, &amp;<span class="ruby-identifier">callback</span>)
  <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">io</span>] = <span class="ruby-identifier">callback</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- listen_to-source -->
            
          </div>

          

          
        </div><!-- listen_to-method -->

      
        <div id="loop-method" class="method-detail ">
          <a name="method-i-loop"></a>

          
          <div class="method-heading">
            <span class="method-name">loop</span><span
              class="method-args">(wait=nil, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>The main event <a href="Session.html#method-i-loop">loop</a>. Calls #<a
href="Session.html#method-i-process">process</a> until #<a
href="Session.html#method-i-process">process</a> returns false. If a block
is given, it is passed to #<a
href="Session.html#method-i-process">process</a>, otherwise a default proc
is used that just returns true if there are any channels active (see #<a
href="Session.html#method-i-busy-3F">busy?</a>). The # <tt>wait</tt>
parameter is also passed through to #<a
href="Session.html#method-i-process">process</a> (where it is interpreted
as the maximum number of seconds to wait for IO.select to return).</p>

<pre># loop for as long as there are any channels active
ssh.loop

# loop for as long as there are any channels active, but make sure
# the event loop runs at least once per 0.1 second
ssh.loop(0.1)

# loop until ctrl-C is pressed
int_pressed = false
trap(&quot;INT&quot;) { int_pressed = true }
ssh.loop(0.1) { not int_pressed }</pre>
            

            
            <div class="method-source-code" id="loop-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">loop</span>(<span class="ruby-identifier">wait</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">running</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">busy?</span> }
  <span class="ruby-identifier">loop_forever</span> { <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">wait</span>, &amp;<span class="ruby-identifier">running</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- loop-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Session.html#method-i-loop_forever">loop_forever</a>
          </div>
          

          
        </div><!-- loop-method -->

      
        <div id="loop_forever-method" class="method-detail method-alias">
          <a name="method-i-loop_forever"></a>

          
          <div class="method-heading">
            <span class="method-name">loop_forever</span><span
              class="method-args">(wait=nil, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>preserve a reference to Kernel#loop</p>
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Session.html#method-i-loop">loop</a>
          </div>
          
        </div><!-- loop_forever-method -->

      
        <div id="on_global_request-method" class="method-detail ">
          <a name="method-i-on_global_request"></a>

          
          <div class="method-heading">
            <span class="method-name">on_global_request</span><span
              class="method-args">(type, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Registers a handler to be invoked when the server sends a global request of
the given type. The callback receives the request data as the first
parameter, and true/false as the second (indicating whether a response is
required). If the callback sends the response, it should return :sent.
Otherwise, if it returns true, REQUEST_SUCCESS will be sent, and if it
returns false, REQUEST_FAILURE will be sent.</p>
            

            
            <div class="method-source-code" id="on_global_request-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_global_request</span>(<span class="ruby-identifier">type</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">old</span>, <span class="ruby-ivar">@on_global_request</span>[<span class="ruby-identifier">type</span>] = <span class="ruby-ivar">@on_global_request</span>[<span class="ruby-identifier">type</span>], <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">old</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- on_global_request-source -->
            
          </div>

          

          
        </div><!-- on_global_request-method -->

      
        <div id="on_open_channel-method" class="method-detail ">
          <a name="method-i-on_open_channel"></a>

          
          <div class="method-heading">
            <span class="method-name">on_open_channel</span><span
              class="method-args">(type, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Registers a handler to be invoked when the server wants to open a channel
on the client. The callback receives the connection object, the <a
href="Session.html#method-c-new">new</a> channel object, and the packet
itself as arguments, and should raise <a
href="../ChannelOpenFailed.html">ChannelOpenFailed</a> if it is unable to
open the channel for some reason. Otherwise, the channel will be opened and
a confirmation message sent to the server.</p>

<p>This is used by the <a
href="../Service/Forward.html">Net::SSH::Service::Forward</a> service to
open a channel when a remote forwarded port receives a connection. However,
you are welcome to register handlers for other channel types, as needed.</p>
            

            
            <div class="method-source-code" id="on_open_channel-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 431</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_open_channel</span>(<span class="ruby-identifier">type</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">channel_open_handlers</span>[<span class="ruby-identifier">type</span>] = <span class="ruby-identifier">block</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- on_open_channel-source -->
            
          </div>

          

          
        </div><!-- on_open_channel-method -->

      
        <div id="open_channel-method" class="method-detail ">
          <a name="method-i-open_channel"></a>

          
          <div class="method-heading">
            <span class="method-name">open_channel</span><span
              class="method-args">(type="session", *extra, &on_confirm)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Requests that a <a href="Session.html#method-c-new">new</a> channel be
opened. By default, the channel will be of type “session”, but if you know
what you’re doing you can select any of the channel types supported by the
<a href="../../SSH.html">SSH</a> protocol. The <tt>extra</tt> parameters
must be even in number and conform to the same format as described for <a
href="../Buffer.html#method-c-from">Net::SSH::Buffer.from</a>. If a
callback is given, it will be invoked when the server confirms that the
channel opened successfully. The sole parameter for the callback is the
channel object itself.</p>

<p>In general, you’ll use #<a
href="Session.html#method-i-open_channel">open_channel</a> without any
arguments; the only time you’d want to set the channel type or pass
additional initialization data is if you were implementing an <a
href="../../SSH.html">SSH</a> extension.</p>

<pre>channel = ssh.open_channel do |ch|
  ch.exec &quot;grep something /some/files&quot; do |ch, success|
    ...
  end
end

channel.wait</pre>
            

            
            <div class="method-source-code" id="open_channel-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">open_channel</span>(<span class="ruby-identifier">type</span>=<span class="ruby-string">&quot;session&quot;</span>, *<span class="ruby-identifier">extra</span>, &amp;<span class="ruby-identifier">on_confirm</span>)
  <span class="ruby-identifier">local_id</span> = <span class="ruby-identifier">get_next_channel_id</span>
  <span class="ruby-identifier">channel</span> = <span class="ruby-constant">Channel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">local_id</span>, &amp;<span class="ruby-identifier">on_confirm</span>)

  <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:byte</span>, <span class="ruby-constant">CHANNEL_OPEN</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">type</span>, <span class="ruby-value">:long</span>, <span class="ruby-identifier">local_id</span>,
    <span class="ruby-value">:long</span>, <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">local_maximum_window_size</span>,
    <span class="ruby-value">:long</span>, <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">local_maximum_packet_size</span>, *<span class="ruby-identifier">extra</span>)
  <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">msg</span>)

  <span class="ruby-identifier">channels</span>[<span class="ruby-identifier">local_id</span>] = <span class="ruby-identifier">channel</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- open_channel-source -->
            
          </div>

          

          
        </div><!-- open_channel-method -->

      
        <div id="postprocess-method" class="method-detail ">
          <a name="method-i-postprocess"></a>

          
          <div class="method-heading">
            <span class="method-name">postprocess</span><span
              class="method-args">(readers, writers)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This is called internally as part of #<a
href="Session.html#method-i-process">process</a>. It loops over the given
arrays of reader IO’s and writer IO’s, processing them as needed, and then
calls <a
href="../Transport/Session.html#method-i-rekey_as_needed">Net::SSH::Transport::Session#rekey_as_needed</a>
to allow the <a href="Session.html#attribute-i-transport">transport</a>
layer to rekey. Then returns true.</p>
            

            
            <div class="method-source-code" id="postprocess-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">postprocess</span>(<span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>)
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">readers</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">reader</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">reader</span>]
      <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">reader</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">fill</span>.<span class="ruby-identifier">zero?</span>
        <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">close</span>
        <span class="ruby-identifier">stop_listening_to</span>(<span class="ruby-identifier">reader</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">writers</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">writer</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">writer</span>.<span class="ruby-identifier">send_pending</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">rekey_as_needed</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- postprocess-source -->
            
          </div>

          

          
        </div><!-- postprocess-method -->

      
        <div id="preprocess-method" class="method-detail ">
          <a name="method-i-preprocess"></a>

          
          <div class="method-heading">
            <span class="method-name">preprocess</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This is called internally as part of #<a
href="Session.html#method-i-process">process</a>. It dispatches any
available incoming packets, and then runs <a
href="Channel.html#method-i-process">Net::SSH::Connection::Channel#process</a>
for any active channels. If a block is given, it is invoked at the start of
the method and again at the end, and if the block ever returns false, this
method returns false. Otherwise, it returns true.</p>
            

            
            <div class="method-source-code" id="preprocess-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">preprocess</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">dispatch_incoming_packets</span>
  <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">process</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">closing?</span> }
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- preprocess-source -->
            
          </div>

          

          
        </div><!-- preprocess-method -->

      
        <div id="process-method" class="method-detail ">
          <a name="method-i-process"></a>

          
          <div class="method-heading">
            <span class="method-name">process</span><span
              class="method-args">(wait=nil, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>The core of the event <a href="Session.html#method-i-loop">loop</a>. It
processes a single iteration of the event <a
href="Session.html#method-i-loop">loop</a>. If a block is given, it should
return false when the processing should abort, which causes #<a
href="Session.html#method-i-process">process</a> to return false.
Otherwise, #<a href="Session.html#method-i-process">process</a> returns
true. The session itself is yielded to the block as its only argument.</p>

<p>If <tt>wait</tt> is nil (the default), this method will block until any of
the monitored IO objects are ready to be read from or written to. If you
want it to not block, you can pass 0, or you can pass any other numeric
value to indicate that it should block for no more than that many seconds.
Passing 0 is a good way to poll the connection, but if you do it too
frequently it can make your CPU quite busy!</p>

<p>This will also cause all active channels to be processed once each (see <a
href="Channel.html#method-i-on_process">Net::SSH::Connection::Channel#on_process</a>).</p>

<pre># process multiple Net::SSH connections in parallel
connections = [
  Net::SSH.start(&quot;host1&quot;, ...),
  Net::SSH.start(&quot;host2&quot;, ...)
]

connections.each do |ssh|
  ssh.exec &quot;grep something /in/some/files&quot;
end

condition = Proc.new { |s| s.busy? }

loop do
  connections.delete_if { |ssh| !ssh.process(0.1, &amp;condition) }
  break if connections.empty?
end</pre>
            

            
            <div class="method-source-code" id="process-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">wait</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">preprocess</span>(&amp;<span class="ruby-identifier">block</span>)

  <span class="ruby-identifier">r</span> = <span class="ruby-identifier">listeners</span>.<span class="ruby-identifier">keys</span>
  <span class="ruby-identifier">w</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">w2</span><span class="ruby-operator">|</span> <span class="ruby-identifier">w2</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:pending_write?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w2</span>.<span class="ruby-identifier">pending_write?</span> }
  <span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>, = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Compat</span>.<span class="ruby-identifier">io_select</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">w</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">wait</span>)

  <span class="ruby-identifier">postprocess</span>(<span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- process-source -->
            
          </div>

          

          
        </div><!-- process-method -->

      
        <div id="send_global_request-method" class="method-detail ">
          <a name="method-i-send_global_request"></a>

          
          <div class="method-heading">
            <span class="method-name">send_global_request</span><span
              class="method-args">(type, *extra, &callback)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Send a global request of the given type. The <tt>extra</tt> parameters must
be even in number, and conform to the same format as described for <a
href="../Buffer.html#method-c-from">Net::SSH::Buffer.from</a>. If a
callback is not specified, the request will not require a response from the
server, otherwise the server is required to respond and indicate whether
the request was successful or not. This success or failure is indicated by
the callback being invoked, with the first parameter being true or false
(success, or failure), and the second being the packet itself.</p>

<p>Generally, <a href="../../SSH.html">Net::SSH</a> will manage global
requests that need to be sent (e.g. port <a
href="Session.html#method-i-forward">forward</a> requests and such are
handled in the <a
href="../Service/Forward.html">Net::SSH::Service::Forward</a> class, for
instance). However, there may be times when you need to send a global
request that isn’t explicitly handled by <a
href="../../SSH.html">Net::SSH</a>, and so this method is available to you.</p>

<pre>ssh.send_global_request(&quot;keep-alive@openssh.com&quot;)</pre>
            

            
            <div class="method-source-code" id="send_global_request-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_global_request</span>(<span class="ruby-identifier">type</span>, *<span class="ruby-identifier">extra</span>, &amp;<span class="ruby-identifier">callback</span>)
  <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;sending global request #{type}&quot;</span> }
  <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:byte</span>, <span class="ruby-constant">GLOBAL_REQUEST</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value">:bool</span>, <span class="ruby-operator">!</span><span class="ruby-identifier">callback</span>.<span class="ruby-identifier">nil?</span>, *<span class="ruby-identifier">extra</span>)
  <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">msg</span>)
  <span class="ruby-identifier">pending_requests</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">callback</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">callback</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- send_global_request-source -->
            
          </div>

          

          
        </div><!-- send_global_request-method -->

      
        <div id="send_message-method" class="method-detail ">
          <a name="method-i-send_message"></a>

          
          <div class="method-heading">
            <span class="method-name">send_message</span><span
              class="method-args">(message)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Enqueues a message to be sent to the server as soon as the socket is
available for writing. Most programs will never need to call this, but if
you are implementing an extension to the <a href="../../SSH.html">SSH</a>
protocol, or if you need to send a packet that <a
href="../../SSH.html">Net::SSH</a> does not directly support, you can use
this to send it.</p>

<pre>ssh.send_message(Buffer.from(:byte, REQUEST_SUCCESS).to_s)</pre>
            

            
            <div class="method-source-code" id="send_message-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">message</span>)
  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">enqueue_message</span>(<span class="ruby-identifier">message</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- send_message-source -->
            
          </div>

          

          
        </div><!-- send_message-method -->

      
        <div id="shutdown-21-method" class="method-detail ">
          <a name="method-i-shutdown-21"></a>

          
          <div class="method-heading">
            <span class="method-name">shutdown!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Performs a “hard” shutdown of the connection. In general, this should never
be done, but it might be necessary (in a rescue clause, for instance, when
the connection needs to <a href="Session.html#method-i-close">close</a> but
you don’t know the status of the underlying protocol’s state).</p>
            

            
            <div class="method-source-code" id="shutdown-21-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shutdown!</span>
  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">shutdown!</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- shutdown-21-source -->
            
          </div>

          

          
        </div><!-- shutdown-21-method -->

      
        <div id="stop_listening_to-method" class="method-detail ">
          <a name="method-i-stop_listening_to"></a>

          
          <div class="method-heading">
            <span class="method-name">stop_listening_to</span><span
              class="method-args">(io)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes the given io object from the listeners collection, so that the
event <a href="Session.html#method-i-loop">loop</a> will no longer monitor
it.</p>
            

            
            <div class="method-source-code" id="stop_listening_to-source">
<pre>
<span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 411</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop_listening_to</span>(<span class="ruby-identifier">io</span>)
  <span class="ruby-identifier">listeners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">io</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- stop_listening_to-source -->
            
          </div>

          

          
        </div><!-- stop_listening_to-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

